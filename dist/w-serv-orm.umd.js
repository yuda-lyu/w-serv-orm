/*!
 * w-serv-orm v1.0.27
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("fs")):"function"==typeof define&&define.amd?define(["fs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-serv-orm"]=e(t.fs)}(this,(function(t){"use strict";var e="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,n=e||r||Function("return this")(),o=n.Symbol;function i(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var a=Array.isArray,u=Object.prototype,s=u.hasOwnProperty,c=u.toString,l=o?o.toStringTag:void 0;var f=Object.prototype.toString;var d="[object Null]",p="[object Undefined]",h=o?o.toStringTag:void 0;function g(t){return null==t?void 0===t?p:d:h&&h in Object(t)?function(t){var e=s.call(t,l),r=t[l];try{t[l]=void 0;var n=!0}catch(t){}var o=c.call(t);return n&&(e?t[l]=r:delete t[l]),o}(t):function(t){return f.call(t)}(t)}function v(t){return null!=t&&"object"==typeof t}var b="[object Symbol]";function y(t){return"symbol"==typeof t||v(t)&&g(t)==b}var m=1/0,w=o?o.prototype:void 0,j=w?w.toString:void 0;function _(t){if("string"==typeof t)return t;if(a(t))return i(t,_)+"";if(y(t))return j?j.call(t):"";var e=t+"";return"0"==e&&1/t==-m?"-0":e}var x=/\s/;var A=/^\s+/;function O(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&x.test(t.charAt(e)););return e}(t)+1).replace(A,""):t}function S(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function $(t){return t!=t}function k(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,$,r)}var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function T(t){return I.test(t)}var D="\\ud800-\\udfff",M="["+D+"]",P="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",C="\\ud83c[\\udffb-\\udfff]",z="[^"+D+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",F="(?:"+P+"|"+C+")"+"?",U="[\\ufe0e\\ufe0f]?",W=U+F+("(?:\\u200d(?:"+[z,E,L].join("|")+")"+U+F+")*"),B="(?:"+[z+P+"?",P,E,L,M].join("|")+")",N=RegExp(C+"(?="+C+")|"+B+W,"g");function V(t){return T(t)?function(t){return t.match(N)||[]}(t):function(t){return t.split("")}(t)}function H(t){return null==t?"":_(t)}function Y(t,e,r){if((t=H(t))&&(r||void 0===e))return O(t);if(!t||!(e=_(e)))return t;var n=V(t),o=V(e),i=function(t,e){for(var r=-1,n=t.length;++r<n&&k(e,t[r],0)>-1;);return r}(n,o),a=function(t,e){for(var r=t.length;r--&&k(e,t[r],0)>-1;);return r}(n,o)+1;return function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:S(t,e,r)}(n,i,a).join("")}var R=Object.prototype;function q(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||R)}function Z(t,e){return function(r){return t(e(r))}}var J=Z(Object.keys,Object),X=Object.prototype.hasOwnProperty;function G(t){if(!q(t))return J(t);var e=[];for(var r in Object(t))X.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Q(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var K="[object AsyncFunction]",tt="[object Function]",et="[object GeneratorFunction]",rt="[object Proxy]";function nt(t){if(!Q(t))return!1;var e=g(t);return e==tt||e==et||e==K||e==rt}var ot,it=n["__core-js_shared__"],at=(ot=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||""))?"Symbol(src)_1."+ot:"";var ut=Function.prototype.toString;function st(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var ct=/^\[object .+?Constructor\]$/,lt=Function.prototype,ft=Object.prototype,dt=lt.toString,pt=ft.hasOwnProperty,ht=RegExp("^"+dt.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gt(t){return!(!Q(t)||(e=t,at&&at in e))&&(nt(t)?ht:ct).test(st(t));var e}function vt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return gt(r)?r:void 0}var bt=vt(n,"DataView"),yt=vt(n,"Map"),mt=vt(n,"Promise"),wt=vt(n,"Set"),jt=vt(n,"WeakMap"),_t="[object Map]",xt="[object Promise]",At="[object Set]",Ot="[object WeakMap]",St="[object DataView]",$t=st(bt),kt=st(yt),It=st(mt),Tt=st(wt),Dt=st(jt),Mt=g;(bt&&Mt(new bt(new ArrayBuffer(1)))!=St||yt&&Mt(new yt)!=_t||mt&&Mt(mt.resolve())!=xt||wt&&Mt(new wt)!=At||jt&&Mt(new jt)!=Ot)&&(Mt=function(t){var e=g(t),r="[object Object]"==e?t.constructor:void 0,n=r?st(r):"";if(n)switch(n){case $t:return St;case kt:return _t;case It:return xt;case Tt:return At;case Dt:return Ot}return e});var Pt=Mt,Ct=9007199254740991;function zt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ct}function Et(t){return null!=t&&zt(t.length)&&!nt(t)}var Lt="[object String]";function Ft(t){return function(e){return null==e?void 0:e[t]}}var Ut=Ft("length"),Wt="\\ud800-\\udfff",Bt="["+Wt+"]",Nt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vt="\\ud83c[\\udffb-\\udfff]",Ht="[^"+Wt+"]",Yt="(?:\\ud83c[\\udde6-\\uddff]){2}",Rt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="(?:"+Nt+"|"+Vt+")"+"?",Zt="[\\ufe0e\\ufe0f]?",Jt=Zt+qt+("(?:\\u200d(?:"+[Ht,Yt,Rt].join("|")+")"+Zt+qt+")*"),Xt="(?:"+[Ht+Nt+"?",Nt,Yt,Rt,Bt].join("|")+")",Gt=RegExp(Vt+"(?="+Vt+")|"+Xt+Jt,"g");function Qt(t){return T(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):Ut(t)}var Kt="[object Map]",te="[object Set]";function ee(t){if(null==t)return 0;if(Et(t))return"string"==typeof(e=t)||!a(e)&&v(e)&&g(e)==Lt?Qt(t):t.length;var e,r=Pt(t);return r==Kt||r==te?t.size:G(t).length}var re=NaN,ne=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ie=/^0o[0-7]+$/i,ae=parseInt;var ue=1/0,se=17976931348623157e292;function ce(t){return t?(t=function(t){if("number"==typeof t)return t;if(y(t))return re;if(Q(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Q(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=O(t);var r=oe.test(t);return r||ie.test(t)?ae(t.slice(2),r?2:8):ne.test(t)?re:+t}(t))===ue||t===-ue?(t<0?-1:1)*se:t==t?t:0:0===t?t:0}function le(t,e,r){var n,o,i=null==t?0:t.length;return i?S(t,(e=r||void 0===e?1:(n=ce(e),o=n%1,n==n?o?n-o:n:0))<0?0:e,i):[]}function fe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var de,pe=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var u=i[de?a:++n];if(!1===e(o[u],u,o))break}return t};function he(t){return v(t)&&"[object Arguments]"==g(t)}var ge=Object.prototype,ve=ge.hasOwnProperty,be=ge.propertyIsEnumerable,ye=he(function(){return arguments}())?he:function(t){return v(t)&&ve.call(t,"callee")&&!be.call(t,"callee")},me=ye;var we="object"==typeof exports&&exports&&!exports.nodeType&&exports,je=we&&"object"==typeof module&&module&&!module.nodeType&&module,_e=je&&je.exports===we?n.Buffer:void 0,xe=(_e?_e.isBuffer:void 0)||function(){return!1},Ae=9007199254740991,Oe=/^(?:0|[1-9]\d*)$/;function Se(t,e){var r=typeof t;return!!(e=null==e?Ae:e)&&("number"==r||"symbol"!=r&&Oe.test(t))&&t>-1&&t%1==0&&t<e}var $e={};function ke(t){return function(e){return t(e)}}$e["[object Float32Array]"]=$e["[object Float64Array]"]=$e["[object Int8Array]"]=$e["[object Int16Array]"]=$e["[object Int32Array]"]=$e["[object Uint8Array]"]=$e["[object Uint8ClampedArray]"]=$e["[object Uint16Array]"]=$e["[object Uint32Array]"]=!0,$e["[object Arguments]"]=$e["[object Array]"]=$e["[object ArrayBuffer]"]=$e["[object Boolean]"]=$e["[object DataView]"]=$e["[object Date]"]=$e["[object Error]"]=$e["[object Function]"]=$e["[object Map]"]=$e["[object Number]"]=$e["[object Object]"]=$e["[object RegExp]"]=$e["[object Set]"]=$e["[object String]"]=$e["[object WeakMap]"]=!1;var Ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,Te=Ie&&"object"==typeof module&&module&&!module.nodeType&&module,De=Te&&Te.exports===Ie&&e.process,Me=function(){try{var t=Te&&Te.require&&Te.require("util").types;return t||De&&De.binding&&De.binding("util")}catch(t){}}(),Pe=Me&&Me.isTypedArray,Ce=Pe?ke(Pe):function(t){return v(t)&&zt(t.length)&&!!$e[g(t)]},ze=Object.prototype.hasOwnProperty;function Ee(t,e){var r=a(t),n=!r&&me(t),o=!r&&!n&&xe(t),i=!r&&!n&&!o&&Ce(t),u=r||n||o||i,s=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=s.length;for(var l in t)!e&&!ze.call(t,l)||u&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Se(l,c))||s.push(l);return s}function Le(t){return Et(t)?Ee(t):G(t)}var Fe=function(t,e){return function(r,n){if(null==r)return r;if(!Et(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}((function(t,e){return t&&pe(t,e,Le)})),Ue=Fe;function We(t){return t}function Be(t,e){var r;return(a(t)?fe:Ue)(t,"function"==typeof(r=e)?r:We)}function Ne(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}function Ve(t){return"[object Array]"===Object.prototype.toString.call(t)}function He(t){return"[object Object]"===Object.prototype.toString.call(t)}function Ye(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function Re(t,e){let r=Ne();if(!Ve(t)&&!He(t))return r.reject("rs is not an array or object"),r;let n=!1;if(He(t)){n=!0;let e=[];Be(t,((t,r)=>{e.push({k:r,v:t})})),t=e}Ye(e)||(e=function(t){return t});let o=-1,i=[];return t.reduce((function(t,r){return t.then((function(t){i.push(t),o+=1;let a=o,u=r;return n&&(a=r.k,u=r.v),Ye(e)?e(u,a):u}))}),Promise.resolve()).then((function(t){i.push(t),i=le(i),r.resolve(i)})).catch((function(t){r.reject(t)})),r}var qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ze=/^\w*$/;function Je(t,e){if(a(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!y(t))||(Ze.test(t)||!qe.test(t)||null!=e&&t in Object(e))}var Xe=vt(Object,"create");var Ge=Object.prototype.hasOwnProperty;var Qe=Object.prototype.hasOwnProperty;function Ke(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function tr(t,e){return t===e||t!=t&&e!=e}function er(t,e){for(var r=t.length;r--;)if(tr(t[r][0],e))return r;return-1}Ke.prototype.clear=function(){this.__data__=Xe?Xe(null):{},this.size=0},Ke.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ke.prototype.get=function(t){var e=this.__data__;if(Xe){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ge.call(e,t)?e[t]:void 0},Ke.prototype.has=function(t){var e=this.__data__;return Xe?void 0!==e[t]:Qe.call(e,t)},Ke.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Xe&&void 0===e?"__lodash_hash_undefined__":e,this};var rr=Array.prototype.splice;function nr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function or(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nr.prototype.clear=function(){this.__data__=[],this.size=0},nr.prototype.delete=function(t){var e=this.__data__,r=er(e,t);return!(r<0)&&(r==e.length-1?e.pop():rr.call(e,r,1),--this.size,!0)},nr.prototype.get=function(t){var e=this.__data__,r=er(e,t);return r<0?void 0:e[r][1]},nr.prototype.has=function(t){return er(this.__data__,t)>-1},nr.prototype.set=function(t,e){var r=this.__data__,n=er(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},ir.prototype.clear=function(){this.size=0,this.__data__={hash:new Ke,map:new(yt||nr),string:new Ke}},ir.prototype.delete=function(t){var e=or(this,t).delete(t);return this.size-=e?1:0,e},ir.prototype.get=function(t){return or(this,t).get(t)},ir.prototype.has=function(t){return or(this,t).has(t)},ir.prototype.set=function(t,e){var r=or(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var ar="Expected a function";function ur(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ar);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(ur.Cache||ir),r}ur.Cache=ir;var sr,cr,lr,fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dr=/\\(\\)?/g,pr=(sr=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(fr,(function(t,r,n,o){e.push(n?o.replace(dr,"$1"):r||t)})),e},cr=ur(sr,(function(t){return 500===lr.size&&lr.clear(),t})),lr=cr.cache,cr),hr=pr;function gr(t,e){return a(t)?t:Je(t,e)?[t]:hr(H(t))}var vr=1/0;function br(t){if("string"==typeof t||y(t))return t;var e=t+"";return"0"==e&&1/t==-vr?"-0":e}function yr(t,e){for(var r=0,n=(e=gr(e,t)).length;null!=t&&r<n;)t=t[br(e[r++])];return r&&r==n?t:void 0}function mr(t,e,r){var n=null==t?void 0:yr(t,e);return void 0===n?r:n}function wr(e){return function(t){let e=mr(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");return!!e.existsSync(t)&&!e.lstatSync(t).isDirectory()&&!e.lstatSync(t).isSymbolicLink()}(e,{fs:t})}function jr(t){if(He(t)){for(let e in t)return!0;return!1}return!1}var _r="[object Boolean]";function xr(t){return!0===(e=t)||!1===e||v(e)&&g(e)==_r;var e}function Ar(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}let Or={backup:async function(t){return await Re(t,(async(t,e)=>(console.log("backup...",e),{name:e,data:await t.select()})))},recover:async function(e,r,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!wr(e))throw console.log("fp",e),new Error("fp is not exist");if(!jr(r))throw console.log("woItems",r),new Error("invalid woItems");Ye(n)||(n=null),xr(o)||(o=!1);let i=t.readFileSync(e,"utf8");i=Y(i);let a=function(t){if(!Ar(t))return{};let e={};try{e=JSON.parse(t)}catch(t){e={}}return e}(i);Ye(n)&&n(),await Re(a,(async t=>{console.log("recover...",t.name),o&&(console.log("needCreateStorage"),await r[t.name].createStorage());let e=null;return ee(t.data)>0&&(e=await r[t.name].insert(t.data)),e}))}};function Sr(t){var e=this.__data__=new nr(t);this.size=e.size}Sr.prototype.clear=function(){this.__data__=new nr,this.size=0},Sr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Sr.prototype.get=function(t){return this.__data__.get(t)},Sr.prototype.has=function(t){return this.__data__.has(t)},Sr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof nr){var n=r.__data__;if(!yt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ir(n)}return r.set(t,e),this.size=r.size,this};function $r(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ir;++e<r;)this.add(t[e])}function kr(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Ir(t,e){return t.has(e)}$r.prototype.add=$r.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},$r.prototype.has=function(t){return this.__data__.has(t)};var Tr=1,Dr=2;function Mr(t,e,r,n,o,i){var a=r&Tr,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,d=!0,p=r&Dr?new $r:void 0;for(i.set(t,e),i.set(e,t);++f<u;){var h=t[f],g=e[f];if(n)var v=a?n(g,h,f,e,t,i):n(h,g,f,t,e,i);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!kr(e,(function(t,e){if(!Ir(p,e)&&(h===t||o(h,t,r,n,i)))return p.push(e)}))){d=!1;break}}else if(h!==g&&!o(h,g,r,n,i)){d=!1;break}}return i.delete(t),i.delete(e),d}var Pr=n.Uint8Array;function Cr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function zr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Er=1,Lr=2,Fr="[object Boolean]",Ur="[object Date]",Wr="[object Error]",Br="[object Map]",Nr="[object Number]",Vr="[object RegExp]",Hr="[object Set]",Yr="[object String]",Rr="[object Symbol]",qr="[object ArrayBuffer]",Zr="[object DataView]",Jr=o?o.prototype:void 0,Xr=Jr?Jr.valueOf:void 0;function Gr(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function Qr(t,e,r){var n=e(t);return a(t)?n:Gr(n,r(t))}function Kr(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function tn(){return[]}var en=Object.prototype.propertyIsEnumerable,rn=Object.getOwnPropertySymbols,nn=rn?function(t){return null==t?[]:(t=Object(t),Kr(rn(t),(function(e){return en.call(t,e)})))}:tn;function on(t){return Qr(t,Le,nn)}var an=1,un=Object.prototype.hasOwnProperty;var sn=1,cn="[object Arguments]",ln="[object Array]",fn="[object Object]",dn=Object.prototype.hasOwnProperty;function pn(t,e,r,n,o,i){var u=a(t),s=a(e),c=u?ln:Pt(t),l=s?ln:Pt(e),f=(c=c==cn?fn:c)==fn,d=(l=l==cn?fn:l)==fn,p=c==l;if(p&&xe(t)){if(!xe(e))return!1;u=!0,f=!1}if(p&&!f)return i||(i=new Sr),u||Ce(t)?Mr(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case Zr:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case qr:return!(t.byteLength!=e.byteLength||!i(new Pr(t),new Pr(e)));case Fr:case Ur:case Nr:return tr(+t,+e);case Wr:return t.name==e.name&&t.message==e.message;case Vr:case Yr:return t==e+"";case Br:var u=Cr;case Hr:var s=n&Er;if(u||(u=zr),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;n|=Lr,a.set(t,e);var l=Mr(u(t),u(e),n,o,i,a);return a.delete(t),l;case Rr:if(Xr)return Xr.call(t)==Xr.call(e)}return!1}(t,e,c,r,n,o,i);if(!(r&sn)){var h=f&&dn.call(t,"__wrapped__"),g=d&&dn.call(e,"__wrapped__");if(h||g){var v=h?t.value():t,b=g?e.value():e;return i||(i=new Sr),o(v,b,r,n,i)}}return!!p&&(i||(i=new Sr),function(t,e,r,n,o,i){var a=r&an,u=on(t),s=u.length;if(s!=on(e).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in e:un.call(e,l)))return!1}var f=i.get(t),d=i.get(e);if(f&&d)return f==e&&d==t;var p=!0;i.set(t,e),i.set(e,t);for(var h=a;++c<s;){var g=t[l=u[c]],v=e[l];if(n)var b=a?n(v,g,l,e,t,i):n(g,v,l,t,e,i);if(!(void 0===b?g===v||o(g,v,r,n,i):b)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=t.constructor,m=e.constructor;y==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,r,n,o,i))}function hn(t,e,r,n,o){return t===e||(null==t||null==e||!v(t)&&!v(e)?t!=t&&e!=e:pn(t,e,r,n,hn,o))}var gn=1,vn=2;function bn(t){return t==t&&!Q(t)}function yn(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function mn(t){var e=function(t){for(var e=Le(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,bn(o)]}return e}(t);return 1==e.length&&e[0][2]?yn(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var s=(u=r[o])[0],c=t[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var f=new Sr;if(n)var d=n(c,l,s,t,e,f);if(!(void 0===d?hn(l,c,gn|vn,n,f):d))return!1}}return!0}(r,t,e)}}function wn(t,e){return null!=t&&e in Object(t)}function jn(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=gr(e,t)).length,i=!1;++n<o;){var u=br(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&zt(o)&&Se(u,o)&&(a(t)||me(t))}(t,e,wn)}var _n=1,xn=2;function An(t){return Je(t)?Ft(br(t)):function(t){return function(e){return yr(e,t)}}(t)}function On(t){return"function"==typeof t?t:null==t?We:"object"==typeof t?a(t)?(e=t[0],r=t[1],Je(e)&&bn(r)?yn(br(e),r):function(t){var n=mr(t,e);return void 0===n&&n===r?jn(t,e):hn(r,n,_n|xn)}):mn(t):An(t);var e,r}function Sn(t,e){var r=-1,n=Et(t)?Array(t.length):[];return Ue(t,(function(t,o,i){n[++r]=e(t,o,i)})),n}function $n(t,e){return(a(t)?i:Sn)(t,On(e))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var kn={};!function(t,e){t.exports=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",u="day",s="week",c="month",l="quarter",f="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},b=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},y={s:b,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+b(n,2,"0")+":"+b(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,c),i=r-o<0,a=e.clone().add(n+(i?-1:1),c);return+(-(n+(r-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:s,d:u,D:d,h:a,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",w={};w[m]=v;var j="$isDayjsObject",_=function(t){return t instanceof S||!(!t||!t[j])},x=function t(e,r,n){var o;if(!e)return m;if("string"==typeof e){var i=e.toLowerCase();w[i]&&(o=i),r&&(w[i]=r,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var u=e.name;w[u]=e,o=u}return!n&&o&&(m=o),o||!n&&m},A=function(t,e){if(_(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new S(r)},O=y;O.l=x,O.i=_,O.w=function(t,e){return A(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function v(t){this.$L=x(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[j]=!0}var b=v.prototype;return b.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(h);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return O},b.isValid=function(){return!(this.$d.toString()===p)},b.isSame=function(t,e){var r=A(t);return this.startOf(e)<=r&&r<=this.endOf(e)},b.isAfter=function(t,e){return A(t)<this.startOf(e)},b.isBefore=function(t,e){return this.endOf(e)<A(t)},b.$g=function(t,e,r){return O.u(t)?this[e]:this.set(r,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,e){var r=this,n=!!O.u(e)||e,l=O.p(t),p=function(t,e){var o=O.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(u)},h=function(t,e){return O.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},g=this.$W,v=this.$M,b=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case f:return n?p(1,0):p(31,11);case c:return n?p(1,v):p(0,v+1);case s:var m=this.$locale().weekStart||0,w=(g<m?g+7:g)-m;return p(n?b-w:b+(6-w),v);case u:case d:return h(y+"Hours",0);case a:return h(y+"Minutes",1);case i:return h(y+"Seconds",2);case o:return h(y+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,e){var r,s=O.p(t),l="set"+(this.$u?"UTC":""),p=(r={},r[u]=l+"Date",r[d]=l+"Date",r[c]=l+"Month",r[f]=l+"FullYear",r[a]=l+"Hours",r[i]=l+"Minutes",r[o]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],h=s===u?this.$D+(e-this.$W):e;if(s===c||s===f){var g=this.clone().set(d,1);g.$d[p](h),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},b.set=function(t,e){return this.clone().$set(t,e)},b.get=function(t){return this[O.p(t)]()},b.add=function(n,l){var d,p=this;n=Number(n);var h=O.p(l),g=function(t){var e=A(p);return O.w(e.date(e.date()+Math.round(t*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===f)return this.set(f,this.$y+n);if(h===u)return g(1);if(h===s)return g(7);var v=(d={},d[i]=e,d[a]=r,d[o]=t,d)[h]||1,b=this.$d.getTime()+n*v;return O.w(b,this)},b.subtract=function(t,e){return this.add(-1*t,e)},b.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=O.z(this),i=this.$H,a=this.$m,u=this.$M,s=r.weekdays,c=r.months,l=r.meridiem,f=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].slice(0,i)},d=function(t){return O.s(i%12||12,t,"0")},h=l||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return O.s(e.$y,4,"0");case"M":return u+1;case"MM":return O.s(u+1,2,"0");case"MMM":return f(r.monthsShort,u,c,3);case"MMMM":return f(c,u);case"D":return e.$D;case"DD":return O.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(r.weekdaysMin,e.$W,s,2);case"ddd":return f(r.weekdaysShort,e.$W,s,3);case"dddd":return s[e.$W];case"H":return String(i);case"HH":return O.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return h(i,a,!0);case"A":return h(i,a,!1);case"m":return String(a);case"mm":return O.s(a,2,"0");case"s":return String(e.$s);case"ss":return O.s(e.$s,2,"0");case"SSS":return O.s(e.$ms,3,"0");case"Z":return o}return null}(t)||o.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,d,p){var h,g=this,v=O.p(d),b=A(n),y=(b.utcOffset()-this.utcOffset())*e,m=this-b,w=function(){return O.m(g,b)};switch(v){case f:h=w()/12;break;case c:h=w();break;case l:h=w()/3;break;case s:h=(m-y)/6048e5;break;case u:h=(m-y)/864e5;break;case a:h=m/r;break;case i:h=m/e;break;case o:h=m/t;break;default:h=m}return p?h:O.a(h)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return w[this.$L]},b.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=x(t,e,!0);return n&&(r.$L=n),r},b.clone=function(){return O.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},v}(),$=S.prototype;return A.prototype=$,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",u],["$M",c],["$y",f],["$D",d]].forEach((function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),A.extend=function(t,e){return t.$i||(t(e,S,A),t.$i=!0),A},A.locale=x,A.isDayjs=_,A.unix=function(t){return A(1e3*t)},A.en=w[m],A.Ls=w,A.p={},A}()}({get exports(){return kn},set exports(t){kn=t}});var In=kn;var Tn=function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Dn=Tn;function Mn(t,e,r){"__proto__"==e&&Dn?Dn(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Pn=Object.prototype.hasOwnProperty;function Cn(t,e,r){var n=t[e];Pn.call(t,e)&&tr(n,r)&&(void 0!==r||e in t)||Mn(t,e,r)}function zn(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],s=n?n(r[u],t[u],u,r,t):void 0;void 0===s&&(s=t[u]),o?Mn(r,u,s):Cn(r,u,s)}return r}var En=Object.prototype.hasOwnProperty;function Ln(t){if(!Q(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=q(t),r=[];for(var n in t)("constructor"!=n||!e&&En.call(t,n))&&r.push(n);return r}function Fn(t){return Et(t)?Ee(t,!0):Ln(t)}var Un="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wn=Un&&"object"==typeof module&&module&&!module.nodeType&&module,Bn=Wn&&Wn.exports===Un?n.Buffer:void 0,Nn=Bn?Bn.allocUnsafe:void 0;var Vn=Z(Object.getPrototypeOf,Object),Hn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Gr(e,nn(t)),t=Vn(t);return e}:tn,Yn=Hn;function Rn(t){return Qr(t,Fn,Yn)}var qn=Object.prototype.hasOwnProperty;function Zn(t){var e=new t.constructor(t.byteLength);return new Pr(e).set(new Pr(t)),e}var Jn=/\w*$/;var Xn=o?o.prototype:void 0,Gn=Xn?Xn.valueOf:void 0;var Qn="[object Boolean]",Kn="[object Date]",to="[object Map]",eo="[object Number]",ro="[object RegExp]",no="[object Set]",oo="[object String]",io="[object Symbol]",ao="[object ArrayBuffer]",uo="[object DataView]",so="[object Float32Array]",co="[object Float64Array]",lo="[object Int8Array]",fo="[object Int16Array]",po="[object Int32Array]",ho="[object Uint8Array]",go="[object Uint8ClampedArray]",vo="[object Uint16Array]",bo="[object Uint32Array]";function yo(t,e,r){var n,o=t.constructor;switch(e){case ao:return Zn(t);case Qn:case Kn:return new o(+t);case uo:return function(t,e){var r=e?Zn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case so:case co:case lo:case fo:case po:case ho:case go:case vo:case bo:return function(t,e){var r=e?Zn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case to:return new o;case eo:case oo:return new o(t);case ro:return function(t){var e=new t.constructor(t.source,Jn.exec(t));return e.lastIndex=t.lastIndex,e}(t);case no:return new o;case io:return n=t,Gn?Object(Gn.call(n)):{}}}var mo=Object.create,wo=function(){function t(){}return function(e){if(!Q(e))return{};if(mo)return mo(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),jo=wo;var _o=Me&&Me.isMap,xo=_o?ke(_o):function(t){return v(t)&&"[object Map]"==Pt(t)};var Ao=Me&&Me.isSet,Oo=Ao?ke(Ao):function(t){return v(t)&&"[object Set]"==Pt(t)},So=1,$o=2,ko=4,Io="[object Arguments]",To="[object Function]",Do="[object GeneratorFunction]",Mo="[object Object]",Po={};function Co(t,e,r,n,o,i){var u,s=e&So,c=e&$o,l=e&ko;if(r&&(u=o?r(t,n,o,i):r(t)),void 0!==u)return u;if(!Q(t))return t;var f=a(t);if(f){if(u=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&qn.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!s)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,u)}else{var d=Pt(t),p=d==To||d==Do;if(xe(t))return function(t,e){if(e)return t.slice();var r=t.length,n=Nn?Nn(r):new t.constructor(r);return t.copy(n),n}(t,s);if(d==Mo||d==Io||p&&!o){if(u=c||p?{}:function(t){return"function"!=typeof t.constructor||q(t)?{}:jo(Vn(t))}(t),!s)return c?function(t,e){return zn(t,Yn(t),e)}(t,function(t,e){return t&&zn(e,Fn(e),t)}(u,t)):function(t,e){return zn(t,nn(t),e)}(t,function(t,e){return t&&zn(e,Le(e),t)}(u,t))}else{if(!Po[d])return o?t:{};u=yo(t,d,s)}}i||(i=new Sr);var h=i.get(t);if(h)return h;i.set(t,u),Oo(t)?t.forEach((function(n){u.add(Co(n,e,r,n,t,i))})):xo(t)&&t.forEach((function(n,o){u.set(o,Co(n,e,r,o,t,i))}));var g=f?void 0:(l?c?Rn:on:c?Fn:Le)(t);return fe(g||t,(function(n,o){g&&(n=t[o=n]),Cn(u,o,Co(n,e,r,o,t,i))})),u}Po[Io]=Po["[object Array]"]=Po["[object ArrayBuffer]"]=Po["[object DataView]"]=Po["[object Boolean]"]=Po["[object Date]"]=Po["[object Float32Array]"]=Po["[object Float64Array]"]=Po["[object Int8Array]"]=Po["[object Int16Array]"]=Po["[object Int32Array]"]=Po["[object Map]"]=Po["[object Number]"]=Po[Mo]=Po["[object RegExp]"]=Po["[object Set]"]=Po["[object String]"]=Po["[object Symbol]"]=Po["[object Uint8Array]"]=Po["[object Uint8ClampedArray]"]=Po["[object Uint16Array]"]=Po["[object Uint32Array]"]=!0,Po["[object Error]"]=Po[To]=Po["[object WeakMap]"]=!1;var zo=1,Eo=4;var Lo={},Fo={get exports(){return Lo},set exports(t){Lo=t}},Uo={},Wo={},Bo={get exports(){return Wo},set exports(t){Wo=t}},No={};function Vo(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var Ho=/javascript\s*\:/gim;No.whiteList=Vo(),No.getDefaultWhiteList=Vo,No.onAttr=function(t,e,r){},No.onIgnoreAttr=function(t,e,r){},No.safeAttrValue=function(t,e){return Ho.test(e)?"":e};var Yo={indexOf:function(t,e){var r,n;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var n,o;if(Array.prototype.forEach)return t.forEach(e,r);for(n=0,o=t.length;n<o;n++)e.call(r,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}};var Ro=function(t,e){";"!==(t=Yo.trimRight(t))[t.length-1]&&(t+=";");var r=t.length,n=!1,o=0,i=0,a="";function u(){if(!n){var r=Yo.trim(t.slice(o,i)),u=r.indexOf(":");if(-1!==u){var s=Yo.trim(r.slice(0,u)),c=Yo.trim(r.slice(u+1));if(s){var l=e(o,a.length,s,c,r);l&&(a+=l+"; ")}}}o=i+1}for(;i<r;i++){var s=t[i];if("/"===s&&"*"===t[i+1]){var c=t.indexOf("*/",i+2);if(-1===c)break;o=(i=c+1)+1,n=!1}else"("===s?n=!0:")"===s?n=!1:";"===s?n||u():"\n"===s&&u()}return Yo.trim(a)},qo=No,Zo=Ro;function Jo(t){return null==t}function Xo(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).whiteList=t.whiteList||qo.whiteList,t.onAttr=t.onAttr||qo.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||qo.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||qo.safeAttrValue,this.options=t}Xo.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,r=e.whiteList,n=e.onAttr,o=e.onIgnoreAttr,i=e.safeAttrValue;return Zo(t,(function(t,e,a,u,s){var c=r[a],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(u):c instanceof RegExp&&(l=c.test(u)),!0!==l&&(l=!1),u=i(a,u)){var f,d={position:e,sourcePosition:t,source:s,isWhite:l};return l?Jo(f=n(a,u,d))?a+":"+u:f:Jo(f=o(a,u,d))?void 0:f}}))};var Go=Xo;!function(t,e){var r=No,n=Go;for(var o in(e=t.exports=function(t,e){return new n(e).process(t)}).FilterCSS=n,r)e[o]=r[o];"undefined"!=typeof window&&(window.filterCSS=t.exports)}(Bo,Wo);var Qo={indexOf:function(t,e){var r,n;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var n,o;if(Array.prototype.forEach)return t.forEach(e,r);for(n=0,o=t.length;n<o;n++)e.call(r,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}},Ko=Wo.FilterCSS,ti=Wo.getDefaultWhiteList,ei=Qo;function ri(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ni=new Ko;function oi(t){return t.replace(ii,"&lt;").replace(ai,"&gt;")}var ii=/</g,ai=/>/g,ui=/"/g,si=/&quot;/g,ci=/&#([a-zA-Z0-9]*);?/gim,li=/&colon;?/gim,fi=/&newline;?/gim,di=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,pi=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,hi=/u\s*r\s*l\s*\(.*/gi;function gi(t){return t.replace(ui,"&quot;")}function vi(t){return t.replace(si,'"')}function bi(t){return t.replace(ci,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function yi(t){return t.replace(li,":").replace(fi," ")}function mi(t){for(var e="",r=0,n=t.length;r<n;r++)e+=t.charCodeAt(r)<32?" ":t.charAt(r);return ei.trim(e)}function wi(t){return t=mi(t=yi(t=bi(t=vi(t))))}function ji(t){return t=oi(t=gi(t))}Uo.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Uo.getDefaultWhiteList=ri,Uo.onTag=function(t,e,r){},Uo.onIgnoreTag=function(t,e,r){},Uo.onTagAttr=function(t,e,r){},Uo.onIgnoreTagAttr=function(t,e,r){},Uo.safeAttrValue=function(t,e,r,n){if(r=wi(r),"href"===e||"src"===e){if("#"===(r=ei.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===e){if(di.lastIndex=0,di.test(r))return""}else if("style"===e){if(pi.lastIndex=0,pi.test(r))return"";if(hi.lastIndex=0,hi.test(r)&&(di.lastIndex=0,di.test(r)))return"";!1!==n&&(r=(n=n||ni).process(r))}return r=ji(r)},Uo.escapeHtml=oi,Uo.escapeQuote=gi,Uo.unescapeQuote=vi,Uo.escapeHtmlEntities=bi,Uo.escapeDangerHtml5Entities=yi,Uo.clearNonPrintableCharacter=mi,Uo.friendlyAttrValue=wi,Uo.escapeAttrValue=ji,Uo.onIgnoreTagStripAll=function(){return""},Uo.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var r=!Array.isArray(t),n=[],o=!1;return{onIgnoreTag:function(i,a,u){if(function(e){return!!r||-1!==ei.indexOf(t,e)}(i)){if(u.isClosing){var s="[/removed]",c=u.position+s.length;return n.push([!1!==o?o:u.position,c]),o=!1,s}return o||(o=u.position),"[removed]"}return e(i,a,u)},remove:function(t){var e="",r=0;return ei.forEach(n,(function(n){e+=t.slice(r,n[0]),r=n[1]})),e+=t.slice(r)}}},Uo.stripCommentTag=function(t){for(var e="",r=0;r<t.length;){var n=t.indexOf("\x3c!--",r);if(-1===n){e+=t.slice(r);break}e+=t.slice(r,n);var o=t.indexOf("--\x3e",n);if(-1===o)break;r=o+3}return e},Uo.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}))).join("")},Uo.attributeWrapSign='"',Uo.cssFilter=ni,Uo.getDefaultCSSWhiteList=ti;var _i={},xi=Qo;function Ai(t){var e,r=xi.spaceIndex(t);return e=-1===r?t.slice(1,-1):t.slice(1,r+1),"/"===(e=xi.trim(e).toLowerCase()).slice(0,1)&&(e=e.slice(1)),"/"===e.slice(-1)&&(e=e.slice(0,-1)),e}function Oi(t){return"</"===t.slice(0,2)}var Si=/[^a-zA-Z0-9\\_:.-]/gim;function $i(t,e){for(;e<t.length;e++){var r=t[e];if(" "!==r)return"="===r?e:-1}}function ki(t,e){for(;e<t.length;e++){var r=t[e];if(" "!==r)return"'"===r||'"'===r?e:-1}}function Ii(t,e){for(;e>0;e--){var r=t[e];if(" "!==r)return"="===r?e:-1}}function Ti(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}_i.parseTag=function(t,e,r){var n="",o=0,i=!1,a=!1,u=0,s=t.length,c="",l="";t:for(u=0;u<s;u++){var f=t.charAt(u);if(!1===i){if("<"===f){i=u;continue}}else if(!1===a){if("<"===f){n+=r(t.slice(o,u)),i=u,o=u;continue}if(">"===f||u===s-1){n+=r(t.slice(o,i)),c=Ai(l=t.slice(i,u+1)),n+=e(i,n.length,c,l,Oi(l)),o=u+1,i=!1;continue}if('"'===f||"'"===f)for(var d=1,p=t.charAt(u-d);""===p.trim()||"="===p;){if("="===p){a=f;continue t}p=t.charAt(u-++d)}}else if(f===a){a=!1;continue}}return o<s&&(n+=r(t.substr(o))),n},_i.parseAttr=function(t,e){var r=0,n=0,o=[],i=!1,a=t.length;function u(t,r){if(!((t=(t=xi.trim(t)).replace(Si,"").toLowerCase()).length<1)){var n=e(t,r||"");n&&o.push(n)}}for(var s=0;s<a;s++){var c,l=t.charAt(s);if(!1!==i||"="!==l)if(!1===i||s!==n)if(/\s|\n|\t/.test(l)){if(t=t.replace(/\s|\n|\t/g," "),!1===i){if(-1===(c=$i(t,s))){u(xi.trim(t.slice(r,s))),i=!1,r=s+1;continue}s=c-1;continue}if(-1===(c=Ii(t,s-1))){u(i,Ti(xi.trim(t.slice(r,s)))),i=!1,r=s+1;continue}}else;else{if(-1===(c=t.indexOf(l,s+1)))break;u(i,xi.trim(t.slice(n+1,c))),i=!1,r=(s=c)+1}else i=t.slice(r,s),r=s+1,n='"'===t.charAt(r)||"'"===t.charAt(r)?r:ki(t,s+1)}return r<t.length&&(!1===i?u(t.slice(r)):u(i,Ti(xi.trim(t.slice(r))))),xi.trim(o.join(" "))};var Di=Wo.FilterCSS,Mi=Uo,Pi=_i,Ci=Pi.parseTag,zi=Pi.parseAttr,Ei=Qo;function Li(t){return null==t}function Fi(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Mi.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=function(t){var e={};for(var r in t)Array.isArray(t[r])?e[r.toLowerCase()]=t[r].map((function(t){return t.toLowerCase()})):e[r.toLowerCase()]=t[r];return e}(t.whiteList||t.allowList):t.whiteList=Mi.whiteList,this.attributeWrapSign=!0===t.singleQuotedAttributeValue?"'":Mi.attributeWrapSign,t.onTag=t.onTag||Mi.onTag,t.onTagAttr=t.onTagAttr||Mi.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Mi.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Mi.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Mi.safeAttrValue,t.escapeHtml=t.escapeHtml||Mi.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new Di(t.css))}Fi.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this,r=e.options,n=r.whiteList,o=r.onTag,i=r.onIgnoreTag,a=r.onTagAttr,u=r.onIgnoreTagAttr,s=r.safeAttrValue,c=r.escapeHtml,l=e.attributeWrapSign,f=e.cssFilter;r.stripBlankChar&&(t=Mi.stripBlankChar(t)),r.allowCommentTag||(t=Mi.stripCommentTag(t));var d=!1;r.stripIgnoreTagBody&&(d=Mi.StripTagBody(r.stripIgnoreTagBody,i),i=d.onIgnoreTag);var p=Ci(t,(function(t,e,r,d,p){var h={sourcePosition:t,position:e,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(n,r)},g=o(r,d,h);if(!Li(g))return g;if(h.isWhite){if(h.isClosing)return"</"+r+">";var v=function(t){var e=Ei.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var r="/"===(t=Ei.trim(t.slice(e+1,-1)))[t.length-1];return r&&(t=Ei.trim(t.slice(0,-1))),{html:t,closing:r}}(d),b=n[r],y=zi(v.html,(function(t,e){var n=-1!==Ei.indexOf(b,t),o=a(r,t,e,n);return Li(o)?n?(e=s(r,t,e,f))?t+"="+l+e+l:t:Li(o=u(r,t,e,n))?void 0:o:o}));return d="<"+r,y&&(d+=" "+y),v.closing&&(d+=" /"),d+=">"}return Li(g=i(r,d,h))?c(d):g}),c);return d&&(p=d.remove(p)),p};var Ui=Fi;!function(t,e){var r=Uo,n=_i,o=Ui;function i(t,e){return new o(e).process(t)}(e=t.exports=i).filterXSS=i,e.FilterXSS=o,function(){for(var t in r)e[t]=r[t];for(var o in n)e[o]=n[o]}(),"undefined"!=typeof window&&(window.filterXSS=t.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}(Fo,Lo);var Wi=Lo;function Bi(){return"undefined"!=typeof self?self:"undefined"!=typeof window&&void 0!==window.document?window:"undefined"!=typeof global?global:null}function Ni(t){let e=function(){let t=Bi();return Wi||t.xss}();let r=function t(r){return Ve(r)||He(r)?(Be(r,(function(e,n){r[n]=t(e)})),r):Ar(r)?e(r,{onIgnoreTagAttr:function(t,r,n,o){if("style"===r)return r+'="'+e.escapeAttrValue(n)+'"'}}):r}(Co(t,zo|Eo));return r}let Vi=null,Hi=null;function Yi(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"save";if(!jr(Vi))throw console.log("ds",Vi),new Error("invalid ds");let o=Vi[t].keys,i=!1;Ve(r)||(i=!0,r=[r]);let a=function(){if(!Ye(In))throw new Error("invalid dayjs");return In().format("YYYY-MM-DDTHH:mm:ss.SSSZ")}();return n.indexOf("insert")>=0&&(o.indexOf("userId")>=0&&Be(r,((t,n)=>{r[n].userId=e})),o.indexOf("timeCreate")>=0&&Be(r,((t,e)=>{r[e].timeCreate=a})),o.indexOf("userIdUpdate")>=0&&Be(r,((t,n)=>{r[n].userIdUpdate=e})),o.indexOf("timeUpdate")>=0&&Be(r,((t,e)=>{r[e].timeUpdate=a}))),(n.indexOf("insert")>=0||n.indexOf("save")>=0)&&(o.indexOf("userIdUpdate")>=0&&Be(r,((t,n)=>{r[n].userIdUpdate=e})),o.indexOf("timeUpdate")>=0&&Be(r,((t,e)=>{r[e].timeUpdate=a}))),r=$n(r,((t,e)=>{let r={};return Be(t,((t,e)=>{t=Ni(t),r[e]=t})),r})),r=i?r[0]:r}async function Ri(t,e,r,n){let o,i=null;if(!jr(Hi))return Promise.reject("無有效woItems");let a=mr(Hi,e,null);if(null===a)return Promise.reject(`ORM找不到表名稱: ${e}`);if("select"===r){if(o=await a.select(n).catch((t=>{console.log(`${e}.select catch`,t),i="取得資料失敗"})),Ar(i))return Promise.reject(i)}else if("insert"===r||"save"===r){try{n=Yi(e,t,n,r)}catch(t){return console.log("adjustData catch",t.toString()),i="調整資料失敗",Promise.reject(i)}if("insert"===r?o=await a.insert(n).catch((t=>{console.log(`${e}.save catch`,t),i="新增資料失敗"})):"save"===r&&(o=await a.save(n).catch((t=>{console.log(`${e}.save catch`,t),i="儲存資料失敗"}))),Ar(i))return Promise.reject(i);o=Ve(n)?$n(n,(t=>({id:t.id}))):{id:n.id}}else if("del"===r)o=await a.del(n).catch((t=>{console.log(`${e}.del catch`,t),i="刪除資料失敗"}));else if("delAll"===r)o=await a.delAll(n).catch((t=>{console.log(`${e}.delAll catch`,t),i="刪除資料失敗"}));else if("mix"===r){if(!jr(n))return Promise.reject("mix僅支援輸入ltdtDiffByKey結果物件");let r;o=[];let u=mr(n,"add",[]);if(ee(u)>0){try{u=Yi(e,t,u,"insert+save")}catch(t){return console.log("adjustData catch",t.toString()),i="調整資料失敗",Promise.reject(i)}if(await a.insert(u).catch((t=>{console.log(`${e}.save catch`,t),i="新增資料失敗"})),Ar(i))return Promise.reject(i);r=$n(u,(t=>({id:t.id}))),o=[...o,...r]}let s=mr(n,"del",[]);if(ee(s)>0){if(await a.del(s).catch((t=>{console.log(`${e}.save catch`,t),i="刪除資料失敗"})),Ar(i))return Promise.reject(i);r=$n(s,(t=>({id:t.id}))),o=[...o,...r]}let c=mr(n,"diff",[]);if(ee(c)>0){try{c=Yi(e,t,c)}catch(t){return console.log("adjustData catch",t.toString()),i="調整資料失敗",Promise.reject(i)}if(await a.save(c).catch((t=>{console.log(`${e}.save catch`,t),i="變更資料失敗"})),Ar(i))return Promise.reject(i);r=$n(c,(t=>({id:t.id}))),o=[...o,...r]}}else i=`invalid mode: ${r}`;return Ar(i)?Promise.reject(i):o}function qi(t,e){return Vi=t,Hi=e,Ri}function Zi(t,e){var r=[];return Ue(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ji(t){let e=!1;if(Ar(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;e=!0}return e}function Xi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Ve(t)){let t=Ne();return t.reject("pms is not an array"),t}return t.reduce(((t,e)=>t.then(e)),Promise.resolve(e))}let Gi=[],Qi=[],Ki=[],ta=null,ea=null,ra=!0,na=!0;function oa(t){setTimeout((()=>{Gi.push(t)}),1)}function ia(t){setTimeout((()=>{Qi.push(t)}),1)}function aa(t){setTimeout((()=>{Ki.push(t)}),1)}async function ua(t,e,r,n){if(!Ye(ta))return Promise.reject("invalid mapOrm");if(ra&&!Ar(t))return console.log("userId",t),console.log("找不到使用者主鍵"),Promise.reject("找不到使用者主鍵");let o="n";if(ra){if(!Ye(ea))return Promise.reject("invalid getUserById");let e=await ea(t);if(!e)return console.log("userId",t),console.log("找不到使用者資訊"),Promise.reject("找不到使用者資訊");o=mr(e,"isAdmin"),"y"!==o&&"n"!==o&&(o="n");let r=mr(e,"isActive");if("y"!==r&&"n"!==r&&(r="n"),"y"!==r)return console.log("userId",t),console.log("oSelf",e),console.log("使用者被停權或無有效使用者資訊"),Promise.reject("使用者被停權或無有效使用者資訊")}if(await Re(Gi,(i=>i({woName:e,userId:t,isAdmin:o,mode:r,input:n}))),ee(Qi)>0){let i={woName:e,userId:t,isAdmin:o,mode:r,input:n},a=await Xi(Qi,i);n=a.input}let i=await ta(t,e,r,n);var u,s;return na&&"n"===o&&"select"===r&&Ve(i)&&(s=t=>{return r="isActive",!(He(e=t)&&(Ar(r)||Ji(r))&&r in e&&"n"===t.isActive);var e,r},i=(a(u=i)?Kr:Zi)(u,On(s))),ee(Ki)>0&&(i=await Xi(Ki,{woName:e,userId:t,isAdmin:o,mode:r,input:n,output:i})),i}return function(t,e,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=function(t,e,r,n){if(!jr(t))throw console.log("ds",t),new Error("invalid ds");if(!Ye(e))throw console.log("WOrm",e),new Error("invalid WOrm");if(!Ar(r))throw console.log("url",r),new Error("invalid url");if(!Ar(n))throw console.log("db",n),new Error("invalid db");let o={};return Be(Le(t),(t=>{let i=new e({url:r,db:n,cl:t});o[t]=i})),o}(t,e,r,n),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ye(t)?(ta=t,ra=mr(e,"useCheckUser"),xr(ra)||(ra=!0),ea=mr(e,"getUserById"),na=mr(e,"useExcludeWhenNotAdmin"),xr(na)||(na=!0),{addFunCheck:oa,addFunPreProcessing:ia,addFunPostProcessing:aa,procOrm:ua}):Promise.reject("invalid mapOrm")}(qi(t,i),o);return{...Or,woItems:i,...a}}}));
//# sourceMappingURL=w-serv-orm.umd.js.map
